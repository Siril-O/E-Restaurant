<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<f:metadata>
	<f:event listener="#{checkRightsBean.isBusinessAnalytic}" type="preRenderView" />
</f:metadata>
<ui:composition
	template="WEB-INF/templates/adminRestaurantTemplate.xhtml">
	<ui:define name="content">

		<h2>Report</h2>
		<h:form>
			<h:panelGrid columns="3">
				<p:outputLabel for="startDateCalendar" value="Start Date" />
				<p:calendar id="startDateCalendar" value="#{reportBean.startDate}"
					showOn="button"	 required="true" requiredMessage="#{msg['dateRequired']}"/>
							<h:message for="startDateCalendar" style="color:red"/>
				<p:outputLabel for="endDateCalendar" value="End Date" />
				<p:calendar id="endDateCalendar" value="#{reportBean.endDate}"
					showOn="button"  required="true" requiredMessage="#{msg['dateRequired']}"/>
					<h:message for="endDateCalendar" style="color:red"/>

				<h:commandButton value="Show Report" styleClass="btn btn-primary"
					action="#{reportBean.viewReport()}" />
			</h:panelGrid>
		</h:form>
		<p:tabView>
			<p:tab title="Categories">
				<h:dataTable value="#{reportBean.reportByCategories}" var="catItem"
					styleClass="table table-hover">
					<h:column>
						<f:facet name="header">Category</f:facet>
						<h:outputText value="#{catItem.category.name}" />
					</h:column>
					<h:column>
						<f:facet name="header">Quantity of Orders</f:facet>
						<h:outputText value="#{catItem.orderQuantity}" />
					</h:column>
					<h:column>
						<f:facet name="header">Total Summ</f:facet>
						<h:outputText value="#{catItem.totalSumm}" />
					</h:column>
				</h:dataTable>
			</p:tab>
			<p:tab title="Days">
				<h:outputText value="Report by Days" />
				<h:dataTable value="#{reportBean.report}" var="item"
					styleClass="table table-hover">
					<h:column>
						<f:facet name="header">Date</f:facet>
						<h:outputText value="#{item.orderDate}" />
					</h:column>
					<h:column>
						<f:facet name="header">Quantity of Orders</f:facet>
						<h:outputText value="#{item.orderQuantity}" />
					</h:column>
					<h:column>
						<f:facet name="header">Total Summ</f:facet>
						<h:outputText value="#{item.totalSumm}" />
					</h:column>
				</h:dataTable>
			</p:tab>
			<p:tab title="Chart By Quantity">
				<p:panel>
					<p:chart type="line" model="#{reportBean.quantityDateModel}"
						style="height:400px;" />
				</p:panel>
			</p:tab>
			<p:tab title="Chart By Total">
				<p:panel>
					<p:chart type="line" model="#{reportBean.summDateModel}"
						style="height:400px;" />
				</p:panel>
			</p:tab>
			<p:tab title="PieChart by Quantity">
				<p:panel>
					<p:chart type="pie" model="#{reportBean.quantityCategoryModel}"
						style="width:800px;height:500px" />	
				</p:panel>
			</p:tab>
			<p:tab title="PieChart by Total">
				<p:panel>
					<p:chart type="pie" model="#{reportBean.summCategoryModel}"
						style="width:800px;height:500px" />
				</p:panel>
			</p:tab>
		</p:tabView>
	</ui:define>
</ui:composition>
</html>